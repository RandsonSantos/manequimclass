{% extends 'base.html' %}
{% block title %}Pedido #{{ pedido.id }}{% endblock %}

{% block content %}
<style>
  @media print {
    .no-print {
      display: none !important;
    }
    body {
      background: white;
    }
    .linha {
      margin-bottom: 8px;
    }
  }
  .linha {
    margin-bottom: 8px;
  }
</style>

<div class="container" style="max-width: 800px;">
  <!-- CabeÃ§alho -->
  <div class="d-flex justify-content-between align-items-center mb-4 no-print">
    <h3 class="mb-0">Pedido {{ pedido.id }}</h3>
    <button onclick="window.print()" class="btn btn-outline-secondary">
      <i class="bi bi-printer"></i> Imprimir
    </button>
  </div>

  <!-- Bloco: Cliente -->
  <div class="mb-4">
    <h5 class="mb-3">ðŸ‘¤ InformaÃ§Ãµes do Cliente</h5>
    <div class="linha"><strong>Nome:</strong> {{ cliente.nome }}</div>
    <div class="linha"><strong>Telefone:</strong> {{ cliente.telefone }}</div>
    <div class="linha"><strong>Email:</strong> {{ cliente.email or 'â€”' }}</div>
  </div>

  <!-- Bloco: Item -->
  <div class="mb-4">
    <h5 class="mb-3">ðŸŽ½ Item Reservado</h5>
    <div class="linha"><strong>Nome:</strong> {{ item.nome }}</div>
    <div class="linha"><strong>Modelo:</strong> {{ item.modelo }}</div>
    <div class="linha"><strong>Categoria:</strong> {{ item.categoria or 'â€”' }}</div>
  </div>

  <!-- Bloco: Datas -->
  <div class="mb-4">
    <h5 class="mb-3">ðŸ“… Datas</h5>
    <div class="linha"><strong>Evento:</strong> {{ pedido.data_evento.strftime('%d/%m/%Y') }}</div>
    <div class="linha"><strong>Prova:</strong> {{ pedido.data_prova.strftime('%d/%m/%Y') if pedido.data_prova else 'â€”' }}</div>
    <div class="linha"><strong>Retirada:</strong> {{ pedido.data_retirada.strftime('%d/%m/%Y') }}</div>
    <div class="linha"><strong>DevoluÃ§Ã£o:</strong> {{ pedido.data_devolucao.strftime('%d/%m/%Y') }}</div>
  </div>

  <!-- Bloco: Detalhes -->
  <div class="mb-4">
    <h5 class="mb-3">ðŸ“Œ Outros Detalhes</h5>
    <div class="linha"><strong>Status:</strong>
      {% if pedido.cancelado %}
        <span class="badge bg-danger">Cancelado</span>
      {% elif pedido.confirmado %}
        <span class="badge bg-success">Confirmado</span>
      {% else %}
        <span class="badge bg-warning text-dark">Pendente</span>
      {% endif %}
    </div>
    <div class="linha"><strong>ObservaÃ§Ãµes:</strong> {{ pedido.observacoes or 'â€”' }}</div>
    <div class="linha"><strong>Feito em:</strong> {{ pedido.criado_em.strftime('%d/%m/%Y %H:%M') }}</div>
  </div>

  <!-- Bloco: AÃ§Ãµes -->
  <div class="d-flex flex-wrap gap-2 justify-content-between no-print">
    <a href="{{ url_for('editar_pedido', pedido_id=pedido.id) }}" class="btn btn-primary">
      <i class="bi bi-pencil"></i> Editar
    </a>
    <a href="{{ url_for('index', pedido_id=pedido.id) }}" class="btn btn-danger">
      <i class="bi bi-x-circle"></i> Cancelar
    </a>
    <a href="{{ url_for('imprimir_pedido', pedido_id=pedido.id) }}" class="btn btn-secondary" target="_blank">
      <i class="bi bi-printer"></i> Imprimir
    </a>
    <a href="{{ url_for('pedidos') }}" class="btn btn-outline-dark">
      <i class="bi bi-arrow-left"></i> Voltar
    </a>
  </div>
</div>
{% endblock %}
